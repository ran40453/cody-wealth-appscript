<!-- 半透明浮層 -->
<div id="settingsOverlay" hidden>
  <div class="settings-backdrop"></div>
  <div class="settings-sheet card">
    <div class="sheet-head">
      <strong>顯示設定</strong>
      <button id="closeSettings" class="btn-ghost">關閉</button>
    </div>

    <div class="grid" id="settingsPanel">
      <!-- 語意色票（Palette）編輯器：支援 hex 與 rgba(alpha) -->
      <h4>色票 Palette（全域）</h4>
      <div class="kv-grid">
        <div class="k">正向字色 (--tone-pos-fg)</div>
        <div class="v"><input type="color" data-scope="global" data-var="--tone-pos-fg"></div>

        <div class="k">負向字色 (--tone-neg-fg)</div>
        <div class="v"><input type="color" data-scope="global" data-var="--tone-neg-fg"></div>

        <div class="k">資訊字色 (--tone-info-fg)</div>
        <div class="v"><input type="color" data-scope="global" data-var="--tone-info-fg"></div>

        <div class="k">品牌主字 (--tone-primary-fg)</div>
        <div class="v"><input type="color" data-scope="global" data-var="--tone-primary-fg"></div>

        <div class="k">輔助主字 (--tone-secondary-fg)</div>
        <div class="v"><input type="color" data-scope="global" data-var="--tone-secondary-fg"></div>
      </div>

      <div class="kv-grid">
        <div class="k">正向底/邊 (--tone-pos-bg/bd)</div>
        <div class="v" data-rgba-var="--tone-pos-bg">
          <input type="color" data-role="color" value="#10b981"> α
          <input type="range" min="0" max="1" step="0.01" value="0.12" data-role="alpha">
        </div>
        <div class="k"></div>
        <div class="v" data-rgba-var="--tone-pos-bd">
          <input type="color" data-role="color" value="#10b981"> α
          <input type="range" min="0" max="1" step="0.01" value="0.35" data-role="alpha">
        </div>

        <div class="k">負向底/邊 (--tone-neg-bg/bd)</div>
        <div class="v" data-rgba-var="--tone-neg-bg">
          <input type="color" data-role="color" value="#ef4444"> α
          <input type="range" min="0" max="1" step="0.01" value="0.12" data-role="alpha">
        </div>
        <div class="k"></div>
        <div class="v" data-rgba-var="--tone-neg-bd">
          <input type="color" data-role="color" value="#ef4444"> α
          <input type="range" min="0" max="1" step="0.01" value="0.35" data-role="alpha">
        </div>

        <div class="k">資訊底/邊 (--tone-info-bg/bd)</div>
        <div class="v" data-rgba-var="--tone-info-bg">
          <input type="color" data-role="color" value="#3b82f6"> α
          <input type="range" min="0" max="1" step="0.01" value="0.12" data-role="alpha">
        </div>
        <div class="k"></div>
        <div class="v" data-rgba-var="--tone-info-bd">
          <input type="color" data-role="color" value="#3b82f6"> α
          <input type="range" min="0" max="1" step="0.01" value="0.35" data-role="alpha">
        </div>

        <div class="k">警示底/邊 (--tone-warn-bg/bd)</div>
        <div class="v" data-rgba-var="--tone-warn-bg">
          <input type="color" data-role="color" value="#f59e0b"> α
          <input type="range" min="0" max="1" step="0.01" value="0.16" data-role="alpha">
        </div>
        <div class="k"></div>
        <div class="v" data-rgba-var="--tone-warn-bd">
          <input type="color" data-role="color" value="#f59e0b"> α
          <input type="range" min="0" max="1" step="0.01" value="0.38" data-role="alpha">
        </div>
      </div>
      <!-- 全域 -->
      <h4>全域 Global</h4>
      <label>頁面最大寬度 (--container-max)
        <input type="range" min="800" max="1600" step="10"
               data-scope="global" data-var="--container-max" data-suffix="px">
      </label>
      <label>整體縮放 (--ui-scale)
        <input type="range" min="0.8" max="1.4" step="0.01"
               data-scope="global" data-var="--ui-scale">
      </label>
      <label>基礎字級 (--font-body)
        <input type="range" min="14" max="22" step="1"
               data-scope="global" data-var="--font-body" data-suffix="px">
      </label>

      <!-- 僅此頁 -->
      <h4>僅此頁 Page Only</h4>
      <label>表單字級 (--form-font)
        <input type="range" min="14" max="22" step="1"
               data-scope="page" data-var="--form-font" data-suffix="px">
      </label>
      <label>表格字級 (--table-font)
        <input type="range" min="12" max="20" step="1"
               data-scope="page" data-var="--table-font" data-suffix="px">
      </label>
      <label>輸入高度 (--input-h)
        <input type="range" min="44" max="84" step="2"
               data-scope="page" data-var="--input-h" data-suffix="px">
      </label>

      <div class="actions">
        <button id="btnResetPage"  class="btn-ghost">恢復此頁預設</button>
        <button id="btnResetAll"   class="btn-ghost">恢復全域預設</button>
        <button id="btnSave"       class="btn">儲存</button>
      </div>
    </div>
  </div>
</div>

<!-- 整頁設定區（不影響浮層 overlay） -->
<section id="page-settings" class="page">
  <div class="settings-layout">
    <aside class="card">
      <h3>偏好</h3>
      <div class="kv-grid">
        <div class="k">說明</div>
        <div class="v">左側可放靜態資訊、快速切換按鈕、預設方案等。</div>
      </div>
    </aside>

    <main class="card">
      <h3>顯示設定 <span class="badge info">即時套用</span></h3>

      <!-- 直接複製 overlay 的 controls，避免 JS 改動；更名容器與按鈕避免 ID 衝突 -->
      <div id="settingsForm" class="grid">
        <!-- 語意色票（Palette）編輯器：支援 hex 與 rgba(alpha) -->
        <h4>色票 Palette（全域）</h4>
        <div class="kv-grid">
          <div class="k">正向字色 (--tone-pos-fg)</div>
          <div class="v"><input type="color" data-scope="global" data-var="--tone-pos-fg"></div>

          <div class="k">負向字色 (--tone-neg-fg)</div>
          <div class="v"><input type="color" data-scope="global" data-var="--tone-neg-fg"></div>

          <div class="k">資訊字色 (--tone-info-fg)</div>
          <div class="v"><input type="color" data-scope="global" data-var="--tone-info-fg"></div>

          <div class="k">品牌主字 (--tone-primary-fg)</div>
          <div class="v"><input type="color" data-scope="global" data-var="--tone-primary-fg"></div>

          <div class="k">輔助主字 (--tone-secondary-fg)</div>
          <div class="v"><input type="color" data-scope="global" data-var="--tone-secondary-fg"></div>
        </div>

        <div class="kv-grid">
          <div class="k">正向底/邊 (--tone-pos-bg/bd)</div>
          <div class="v" data-rgba-var="--tone-pos-bg">
            <input type="color" data-role="color" value="#10b981"> α
            <input type="range" min="0" max="1" step="0.01" value="0.12" data-role="alpha">
          </div>
          <div class="k"></div>
          <div class="v" data-rgba-var="--tone-pos-bd">
            <input type="color" data-role="color" value="#10b981"> α
            <input type="range" min="0" max="1" step="0.01" value="0.35" data-role="alpha">
          </div>

          <div class="k">負向底/邊 (--tone-neg-bg/bd)</div>
          <div class="v" data-rgba-var="--tone-neg-bg">
            <input type="color" data-role="color" value="#ef4444"> α
            <input type="range" min="0" max="1" step="0.01" value="0.12" data-role="alpha">
          </div>
          <div class="k"></div>
          <div class="v" data-rgba-var="--tone-neg-bd">
            <input type="color" data-role="color" value="#ef4444"> α
            <input type="range" min="0" max="1" step="0.01" value="0.35" data-role="alpha">
          </div>

          <div class="k">資訊底/邊 (--tone-info-bg/bd)</div>
          <div class="v" data-rgba-var="--tone-info-bg">
            <input type="color" data-role="color" value="#3b82f6"> α
            <input type="range" min="0" max="1" step="0.01" value="0.12" data-role="alpha">
          </div>
          <div class="k"></div>
          <div class="v" data-rgba-var="--tone-info-bd">
            <input type="color" data-role="color" value="#3b82f6"> α
            <input type="range" min="0" max="1" step="0.01" value="0.35" data-role="alpha">
          </div>

          <div class="k">警示底/邊 (--tone-warn-bg/bd)</div>
          <div class="v" data-rgba-var="--tone-warn-bg">
            <input type="color" data-role="color" value="#f59e0b"> α
            <input type="range" min="0" max="1" step="0.01" value="0.16" data-role="alpha">
          </div>
          <div class="k"></div>
          <div class="v" data-rgba-var="--tone-warn-bd">
            <input type="color" data-role="color" value="#f59e0b"> α
            <input type="range" min="0" max="1" step="0.01" value="0.38" data-role="alpha">
          </div>
        </div>

        <!-- 全域 -->
        <h4>全域 Global</h4>
        <label>頁面最大寬度 (--container-max)
          <input type="range" min="800" max="1600" step="10"
                 data-scope="global" data-var="--container-max" data-suffix="px">
        </label>
        <label>整體縮放 (--ui-scale)
          <input type="range" min="0.8" max="1.4" step="0.01"
                 data-scope="global" data-var="--ui-scale">
        </label>
        <label>基礎字級 (--font-body)
          <input type="range" min="14" max="22" step="1"
                 data-scope="global" data-var="--font-body" data-suffix="px">
        </label>

        <!-- 僅此頁 -->
        <h4>僅此頁 Page Only</h4>
        <label>表單字級 (--form-font)
          <input type="range" min="14" max="22" step="1"
                 data-scope="page" data-var="--form-font" data-suffix="px">
        </label>
        <label>表格字級 (--table-font)
          <input type="range" min="12" max="20" step="1"
                 data-scope="page" data-var="--table-font" data-suffix="px">
        </label>
        <label>輸入高度 (--input-h)
          <input type="range" min="44" max="84" step="2"
                 data-scope="page" data-var="--input-h" data-suffix="px">
        </label>

        <div class="actions">
          <button class="btn-ghost btnResetPage">恢復此頁預設</button>
          <button class="btn-ghost btnResetAll">恢復全域預設</button>
          <button class="btn btnSave">儲存</button>
        </div>
      </div>
    </main>
  </div>
</section>